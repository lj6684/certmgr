CREATE TABLE ADMINCERT (
   CERTSN               VARCHAR(80)          NOT NULL,
   SUBJECTUPPERCASE     VARCHAR(700)         NOT NULL,
   SUBJECT              VARCHAR(700)         NOT NULL,
   COMMONNAME           VARCHAR(256),
   NOTBEFORE            BIGINT            NOT NULL,
   NOTAFTER             BIGINT            NOT NULL,   
   ADMINSTATUS          VARCHAR(12)          NOT NULL,
   ROLE					VARCHAR(255)		  NOT NULL,
   SIGN_SERVER          VARCHAR(256),
   CONSTRAINT PK_CERT PRIMARY KEY (CERTSN)
);
CREATE TABLE SYSTEMCERT (
   CERTSN               VARCHAR(80)          NOT NULL,
   SUBJECT              VARCHAR(700)         NOT NULL,
   NOTBEFORE            BIGINT,
   NOTAFTER             BIGINT,
   CERTTYPE             VARCHAR(60)          NOT NULL,
   CERTSTATUS           VARCHAR(24)          NOT NULL,
   DEVICE_ID            VARCHAR(40),
   CERTENTITY           BLOB,
   CREATETIME           BIGINT,
   REMARK               VARCHAR(256),
   SIGN_SERVER          VARCHAR(256),
   CONSTRAINT PK_SYSTEMCERT PRIMARY KEY  (CERTSN)
);
CREATE TABLE SPAREKEY (
   ID                   VARCHAR(80)          NOT NULL,
   KEYALG               VARCHAR(30)          NOT NULL,
   KEYSIZE              BIGINT             NOT NULL,
   GENTIME              BIGINT            NOT NULL,
   PUBKEY               VARCHAR(1000)		  NOT NULL,
   PRIKEY               VARCHAR(4001)        NOT NULL,
   SIGN_SERVER          VARCHAR(256),
   CONSTRAINT PK_SPAREKEY PRIMARY KEY  (ID)
);
CREATE TABLE TASKSCHEDULE (
   ID                   VARCHAR(80)          NOT NULL,
   KEYALG               VARCHAR(30)          NOT NULL,
   KEYSIZE              BIGINT             NOT NULL,
   STARTTIME            VARCHAR(20)          NOT NULL,
   ENDTIME              VARCHAR(20)          NOT NULL,
   MAXCNT               BIGINT,
   SIGN_SERVER          VARCHAR(256),
   CONSTRAINT PK_TASKSCHEDULE PRIMARY KEY  (ID)
);
CREATE TABLE OPTAPPLY (
   REQSN                VARCHAR(80)            NOT NULL,
   OPERATORSN           VARCHAR(80)          	NOT NULL,
   OPERATORSUBJECTUPPERCASE VARCHAR(700)       NOT NULL,
   OPERATORSUBJECT      VARCHAR(700)         	NOT NULL,
   APPLYOBJECT			VARCHAR(160)			NOT NULL,
   APPLYTYPE			VARCHAR(100)			NOT NULL,
   APPLYTIME			BIGINT				NOT NULL,
   APPLYSTATUS			VARCHAR(40)			NOT NULL,
   REMARK				VARCHAR(256),
   SIGN_SERVER			VARCHAR(256),
   CONSTRAINT PK_OPTAPPLY PRIMARY KEY  (REQSN)
);
CREATE TABLE ISSUERCERT (
   ISSUERCERTID			VARCHAR(40)			NOT NULL,
   RECORDID				VARCHAR(40)			NOT NULL,
   CERTSN	            VARCHAR(80),
   SERVICEID            VARCHAR(40)          	NOT NULL,
   ISSUERBIN			VARCHAR(40)         	NOT NULL,
   NOTAFTER			    BIGINT		        NOT NULL,
   CERTSTATUS			VARCHAR(40)		    NOT NULL,
   DEVICETYPE			VARCHAR(40)		    NOT NULL,
   DEVICEID				VARCHAR(40),
   KEYALG				VARCHAR(30),
   KEYSIZE				BIGINT,
   PUBKEY				VARCHAR(1000),
   PRIKEY				VARCHAR(4001),
   ISSUERENTITY			BLOB,
   ROOTPUBKEYID			VARCHAR(40),
   ROOTCAENTITY			BLOB,
   SIGN_SERVER			VARCHAR(256),
   CONSTRAINT PK_ISSUERCERT PRIMARY KEY  (ISSUERCERTID)
);
CREATE TABLE ICCERT (
   ICCERTID	            VARCHAR(80)            NOT NULL,
   CERTSN	            VARCHAR(80)            NOT NULL,
   ICCPAN				VARCHAR(40)         	NOT NULL,
   NOTAFTER			    BIGINT	         	NOT NULL,
   KEYALG				VARCHAR(30)			NOT NULL,
   KEYSIZE				BIGINT				NOT NULL,
   PUBKEY               VARCHAR(1000)        	NOT NULL,
   PRIKEY               VARCHAR(4001)        	NOT NULL,   
   ICCENTITY			BLOB					NOT NULL,
   ISSUERBIN			VARCHAR(20)			NOT NULL,
   CREATETIME			BIGINT				NOT NULL,
   SIGN_SERVER			VARCHAR(256),
   CONSTRAINT PK_ICCERT PRIMARY KEY  (ICCERTID)
);
CREATE TABLE ARCHICCERT (
   ICCERTID	            VARCHAR(80)            NOT NULL,
   CERTSN	            VARCHAR(80)            NOT NULL,
   ICCPAN				VARCHAR(40)         	NOT NULL,
   NOTAFTER			    BIGINT		        NOT NULL,
   KEYALG				VARCHAR(30)			NOT NULL,
   KEYSIZE				BIGINT				NOT NULL,
   PUBKEY               VARCHAR(1000)        	NOT NULL,
   PRIKEY               VARCHAR(4001)        	NOT NULL,   
   ICCENTITY			BLOB					NOT NULL,
   ISSUERBIN			VARCHAR(40)			NOT NULL,
   CREATETIME			BIGINT				NOT NULL,
   ARCHIVETIME			BIGINT				NOT NULL,
   SIGN_SERVER			VARCHAR(256),
   CONSTRAINT PK_ARCHICCERT PRIMARY KEY  (ICCERTID)
);
CREATE TABLE OPERATIONLOG (
   ID                   BIGINT                 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
   OPERATORSN           VARCHAR(80),
   OPERATORSUBJECTUPPERCASE VARCHAR(700)       NOT NULL,
   OPERATORSUBJECT      VARCHAR(700)           NOT NULL,
   OBJECTID             VARCHAR(256),
   OBJECTTYPE           VARCHAR(60),
   OPTTYPE              VARCHAR(60)            NOT NULL,
   OPTTIME              BIGINT              NOT NULL,
   OPTCLIENTIP          VARCHAR(30),
   OPTRESULT            SMALLINT               NOT NULL,
   OPTREMARK            VARCHAR(1000),
   SIGN_SERVER          VARCHAR(256),
   CONSTRAINT PK_OPERATIONLOG PRIMARY KEY  (ID)
);

CREATE TABLE OPERATIONLOGARC (
   ID                   BIGINT               	NOT NULL,
   OPERATORSN           VARCHAR(80),
   OPERATORSUBJECTUPPERCASE VARCHAR(700)       NOT NULL,
   OPERATORSUBJECT      VARCHAR(700)         	NOT NULL,
   OBJECTID             VARCHAR(256),
   OBJECTTYPE           VARCHAR(60),
   OPTTYPE              VARCHAR(60)          	NOT NULL,
   OPTTIME              BIGINT              NOT NULL,
   OPTCLIENTIP          VARCHAR(30),
   OPTRESULT            SMALLINT              	NOT NULL,
   OPTREMARK            VARCHAR(1000),
   SIGN_SERVER          VARCHAR(256),
   ARCHIVETIME          BIGINT              NOT NULL,
   CONSTRAINT PK_OPERATIONLOGARC PRIMARY KEY  (ID)
);
CREATE TABLE CONSOLEOPTLOG (
   ID                   BIGINT               	NOT NULL,
   OPERATOR             VARCHAR(60)          	NOT NULL,
   OPTTYPE              VARCHAR(60)          	NOT NULL,
   OPTTIME              BIGINT              NOT NULL,
   OPTCLIENTIP          VARCHAR(30),
   OPTRESULT            SMALLINT              	NOT NULL,
   OPTREMARK            VARCHAR(1000),
   SIGN_SERVER          VARCHAR(256),
   CONSTRAINT PK_CONSOLEOPTLOG PRIMARY KEY  (ID)
);


Insert into SYSTEMCERT (CERTSN,SUBJECT,NOTBEFORE,NOTAFTER,CERTTYPE,CERTSTATUS) values ('${commCertSN}','${commCertSubject}',NULL,NULL,'COMMUNICATECERT','USING');
Insert into SYSTEMCERT (CERTSN,SUBJECT,NOTBEFORE,NOTAFTER,CERTTYPE,CERTSTATUS) values ('${adminCertSN}','${adminCertSubject}',NULL,NULL,'SUPERADMINCERT','USING');
COMMIT;